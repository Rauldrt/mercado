{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 79, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/ai/genkit.ts"],"sourcesContent":["import {genkit} from 'genkit';\nimport {googleAI} from '@genkit-ai/googleai';\n\nexport const ai = genkit({\n  plugins: [googleAI()],\n  model: 'googleai/gemini-2.0-flash',\n});\n"],"names":[],"mappings":";;;AAAA;AAAA;AACA;AAAA;;;AAEO,MAAM,KAAK,CAAA,GAAA,uIAAA,CAAA,SAAM,AAAD,EAAE;IACvB,SAAS;QAAC,CAAA,GAAA,2KAAA,CAAA,WAAQ,AAAD;KAAI;IACrB,OAAO;AACT","debugId":null}},
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/ai/flows/product-recommendations.ts"],"sourcesContent":["'use server';\n\n/**\n * @fileOverview An AI agent that provides personalized product recommendations based on user history.\n *\n * - personalizedProductRecommendations - A function that returns personalized product recommendations.\n * - PersonalizedProductRecommendationsInput - The input type for the personalizedProductRecommendations function.\n * - PersonalizedProductRecommendationsOutput - The return type for the personalizedProductRecommendations function.\n */\n\nimport {ai} from '@/ai/genkit';\nimport {z} from 'genkit';\n\nconst PersonalizedProductRecommendationsInputSchema = z.object({\n  userHistory: z\n    .string()\n    .describe(\n      'A summary of the user history, including browsing history and purchase history.'\n    ),\n});\nexport type PersonalizedProductRecommendationsInput = z.infer<\n  typeof PersonalizedProductRecommendationsInputSchema\n>;\n\nconst PersonalizedProductRecommendationsOutputSchema = z.object({\n  recommendations: z\n    .array(z.string())\n    .describe('A list of product recommendations based on user history.'),\n});\nexport type PersonalizedProductRecommendationsOutput = z.infer<\n  typeof PersonalizedProductRecommendationsOutputSchema\n>;\n\nexport async function personalizedProductRecommendations(\n  input: PersonalizedProductRecommendationsInput\n): Promise<PersonalizedProductRecommendationsOutput> {\n  return personalizedProductRecommendationsFlow(input);\n}\n\nconst prompt = ai.definePrompt({\n  name: 'personalizedProductRecommendationsPrompt',\n  input: {schema: PersonalizedProductRecommendationsInputSchema},\n  output: {schema: PersonalizedProductRecommendationsOutputSchema},\n  prompt: `Based on the user's history:\n\n  {{userHistory}}\n\n  Recommend a list of products that the user might be interested in.`,\n});\n\nconst personalizedProductRecommendationsFlow = ai.defineFlow(\n  {\n    name: 'personalizedProductRecommendationsFlow',\n    inputSchema: PersonalizedProductRecommendationsInputSchema,\n    outputSchema: PersonalizedProductRecommendationsOutputSchema,\n  },\n  async input => {\n    const {output} = await prompt(input);\n    return output!;\n  }\n);\n"],"names":[],"mappings":";;;;;AAEA;;;;;;CAMC,GAED;AACA;AAAA;;;;;;AAEA,MAAM,gDAAgD,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC7D,aAAa,uIAAA,CAAA,IAAC,CACX,MAAM,GACN,QAAQ,CACP;AAEN;AAKA,MAAM,iDAAiD,uIAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC9D,iBAAiB,uIAAA,CAAA,IAAC,CACf,KAAK,CAAC,uIAAA,CAAA,IAAC,CAAC,MAAM,IACd,QAAQ,CAAC;AACd;AAKO,eAAe,mCACpB,KAA8C;IAE9C,OAAO,uCAAuC;AAChD;AAEA,MAAM,SAAS,mHAAA,CAAA,KAAE,CAAC,YAAY,CAAC;IAC7B,MAAM;IACN,OAAO;QAAC,QAAQ;IAA6C;IAC7D,QAAQ;QAAC,QAAQ;IAA8C;IAC/D,QAAQ,CAAC;;;;oEAIyD,CAAC;AACrE;AAEA,MAAM,yCAAyC,mHAAA,CAAA,KAAE,CAAC,UAAU,CAC1D;IACE,MAAM;IACN,aAAa;IACb,cAAc;AAChB,GACA,OAAM;IACJ,MAAM,EAAC,MAAM,EAAC,GAAG,MAAM,OAAO;IAC9B,OAAO;AACT;;;IA1BoB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 161, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/.next-internal/server/app/product/%5Bid%5D/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {personalizedProductRecommendations as '4046260a6a130217b41baf5f5b2be49f94254586f3'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 213, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/products/product-view.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/products/product-view.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/products/product-view.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA4S,GACzU,0EACA","debugId":null}},
    {"offset": {"line": 227, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/products/product-view.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/products/product-view.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/products/product-view.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAwR,GACrT,sDACA","debugId":null}},
    {"offset": {"line": 241, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 251, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/products/product-card.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/products/product-card.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/products/product-card.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAA4S,GACzU,0EACA","debugId":null}},
    {"offset": {"line": 265, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/products/product-card.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/components/products/product-card.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/products/product-card.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;AAAA;;uCACe,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EACjC;IAAa,MAAM,IAAI,MAAM;AAAwR,GACrT,sDACA","debugId":null}},
    {"offset": {"line": 279, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 289, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/products/product-grid.tsx"],"sourcesContent":["import type { Product } from '@/lib/types';\nimport ProductCard from './product-card';\n\ninterface ProductGridProps {\n  products: Product[];\n}\n\nexport default function ProductGrid({ products }: ProductGridProps) {\n  return (\n    <div className=\"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 gap-6\">\n      {products.map(product => (\n        <ProductCard key={product.id} product={product} />\n      ))}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;;;AAMe,SAAS,YAAY,EAAE,QAAQ,EAAoB;IAChE,qBACE,8OAAC;QAAI,WAAU;kBACZ,SAAS,GAAG,CAAC,CAAA,wBACZ,8OAAC,iJAAA,CAAA,UAAW;gBAAkB,SAAS;eAArB,QAAQ,EAAE;;;;;;;;;;AAIpC","debugId":null}},
    {"offset": {"line": 318, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/products/product-recommendations.tsx"],"sourcesContent":["import type { Product } from '@/lib/types';\nimport ProductGrid from './product-grid';\n\ninterface ProductRecommendationsProps {\n  products: Product[];\n}\n\nexport default function ProductRecommendations({ products }: ProductRecommendationsProps) {\n  return (\n    <section>\n      <h2 className=\"text-2xl font-bold tracking-tight mb-6 font-headline\">También te podría interesar</h2>\n      {products.length > 0 ? (\n        <ProductGrid products={products} />\n      ) : (\n        <p>No hay recomendaciones disponibles en este momento.</p>\n      )}\n    </section>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;;;AAMe,SAAS,uBAAuB,EAAE,QAAQ,EAA+B;IACtF,qBACE,8OAAC;;0BACC,8OAAC;gBAAG,WAAU;0BAAuD;;;;;;YACpE,SAAS,MAAM,GAAG,kBACjB,8OAAC,iJAAA,CAAA,UAAW;gBAAC,UAAU;;;;;qCAEvB,8OAAC;0BAAE;;;;;;;;;;;;AAIX","debugId":null}},
    {"offset": {"line": 362, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,CAAA,GAAA,2JAAA,CAAA,UAAO,AAAD,EAAE,CAAA,GAAA,qIAAA,CAAA,OAAI,AAAD,EAAE;AACtB","debugId":null}},
    {"offset": {"line": 378, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/skeleton.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n"],"names":[],"mappings":";;;;AAAA;;;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OACkC;IACrC,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,qCAAqC;QAClD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 402, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/product/%5Bid%5D/page.tsx"],"sourcesContent":["\nimport { notFound } from 'next/navigation';\nimport { getProductById, getProducts } from '@/lib/firebase';\nimport ProductView from '@/components/products/product-view';\nimport ProductRecommendations from '@/components/products/product-recommendations';\nimport { Suspense } from 'react';\nimport { Skeleton } from '@/components/ui/skeleton';\nimport { personalizedProductRecommendations } from '@/ai/flows/product-recommendations';\nimport type { Product } from '@/lib/types';\n\n\ninterface ProductPageProps {\n  params: {\n    id: string;\n  };\n}\n\nfunction RecommendationsFallback() {\n  return (\n    <div className=\"mt-12 lg:mt-16\">\n      <h2 className=\"text-2xl font-bold tracking-tight mb-6 font-headline\">También te podría interesar</h2>\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {[...Array(3)].map((_, i) => (\n           <Skeleton key={i} className=\"h-[450px] w-full\" />\n        ))}\n      </div>\n    </div>\n  )\n}\n\nasync function getRecommendations(currentProduct: Product) {\n  // Simulate user history for demonstration\n  const userHistory = `El usuario está viendo el producto \"${currentProduct.name}\". Recientemente ha visto \"Zapatillas Urbanas\" y tiene un \"Mate Imperial\" en su carrito.`;\n\n  let recommendedProducts: Product[] = [];\n  const allProducts = await getProducts();\n\n  try {\n    const recommendationsResult = await personalizedProductRecommendations({ userHistory });\n    \n    const recommendedProductNames = recommendationsResult.recommendations;\n    \n    recommendedProducts = recommendedProductNames\n        .map(name => allProducts.find(p => p.name.toLowerCase() === name.toLowerCase()))\n        .filter((p): p is Product => p !== undefined && p.id !== currentProduct.id)\n        .slice(0, 3);\n\n  } catch (error) {\n    console.error(\"Error fetching AI recommendations:\", error);\n    // Fallback to showing products from the same category\n    recommendedProducts = allProducts\n        .filter(p => p.category === currentProduct.category && p.id !== currentProduct.id)\n        .slice(0, 3);\n  }\n  \n  // If still no products (e.g., category had only one item), show some random ones\n  if (recommendedProducts.length === 0) {\n     recommendedProducts = [...allProducts]\n        .sort(() => 0.5 - Math.random())\n        .filter(p => p.id !== currentProduct.id)\n        .slice(0, 3);\n  }\n  return recommendedProducts;\n}\n\n\nexport default async function ProductPage({ params }: ProductPageProps) {\n  const product = await getProductById(params.id);\n\n  if (!product) {\n    notFound();\n  }\n\n  const recommendedProducts = await getRecommendations(product);\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <ProductView product={product}>\n        <div className=\"mt-12 lg:mt-16\">\n          <Suspense fallback={<RecommendationsFallback />}>\n            <ProductRecommendations products={recommendedProducts} />\n          </Suspense>\n        </div>\n      </ProductView>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;AAUA,SAAS;IACP,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAuD;;;;;;0BACrE,8OAAC;gBAAI,WAAU;0BACZ;uBAAI,MAAM;iBAAG,CAAC,GAAG,CAAC,CAAC,GAAG,kBACpB,8OAAC,oIAAA,CAAA,WAAQ;wBAAS,WAAU;uBAAb;;;;;;;;;;;;;;;;AAK1B;AAEA,eAAe,mBAAmB,cAAuB;IACvD,0CAA0C;IAC1C,MAAM,cAAc,CAAC,oCAAoC,EAAE,eAAe,IAAI,CAAC,wFAAwF,CAAC;IAExK,IAAI,sBAAiC,EAAE;IACvC,MAAM,cAAc,MAAM,CAAA,GAAA,sHAAA,CAAA,cAAW,AAAD;IAEpC,IAAI;QACF,MAAM,wBAAwB,MAAM,CAAA,GAAA,gJAAA,CAAA,qCAAkC,AAAD,EAAE;YAAE;QAAY;QAErF,MAAM,0BAA0B,sBAAsB,eAAe;QAErE,sBAAsB,wBACjB,GAAG,CAAC,CAAA,OAAQ,YAAY,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,CAAC,WAAW,OAAO,KAAK,WAAW,KAC3E,MAAM,CAAC,CAAC,IAAoB,MAAM,aAAa,EAAE,EAAE,KAAK,eAAe,EAAE,EACzE,KAAK,CAAC,GAAG;IAEhB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sCAAsC;QACpD,sDAAsD;QACtD,sBAAsB,YACjB,MAAM,CAAC,CAAA,IAAK,EAAE,QAAQ,KAAK,eAAe,QAAQ,IAAI,EAAE,EAAE,KAAK,eAAe,EAAE,EAChF,KAAK,CAAC,GAAG;IAChB;IAEA,iFAAiF;IACjF,IAAI,oBAAoB,MAAM,KAAK,GAAG;QACnC,sBAAsB;eAAI;SAAY,CAClC,IAAI,CAAC,IAAM,MAAM,KAAK,MAAM,IAC5B,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,eAAe,EAAE,EACtC,KAAK,CAAC,GAAG;IAChB;IACA,OAAO;AACT;AAGe,eAAe,YAAY,EAAE,MAAM,EAAoB;IACpE,MAAM,UAAU,MAAM,CAAA,GAAA,sHAAA,CAAA,iBAAc,AAAD,EAAE,OAAO,EAAE;IAE9C,IAAI,CAAC,SAAS;QACZ,CAAA,GAAA,qLAAA,CAAA,WAAQ,AAAD;IACT;IAEA,MAAM,sBAAsB,MAAM,mBAAmB;IAErD,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC,iJAAA,CAAA,UAAW;YAAC,SAAS;sBACpB,cAAA,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,qMAAA,CAAA,WAAQ;oBAAC,wBAAU,8OAAC;;;;;8BACnB,cAAA,8OAAC,4JAAA,CAAA,UAAsB;wBAAC,UAAU;;;;;;;;;;;;;;;;;;;;;;;;;;AAM9C","debugId":null}}]
}